## 그룹 관리

새 그룹은 `/etc/group` 파일에 저장 된다

---

**목차**

1. [그룹 생성](#그룹-생성)
2. [그룹 암호 설정 (정보 변경)](#그룹-암호-설정-(정보-변경))
3. [소유권 변경](#소유권-변경)
4. [리눅스 시스템 종료](#리눅스-시스템-종료)

---

### 그룹 생성

```bash
groupadd [그룹 이름]

# tail 로 확인
```

* 옵션

  * `-g` 그룹 GID 를 직접 지정
  * `-o` GID 의 중복 사용 허용

* 그룹을 생성한다고 해서 사용자가 포함된 채 생성되는 것은 아니다

  * 사용자 추가

    ```bash
    useradd [계정이름]
    ```

    * 암호 설정에서 `-a` 옵션 줘도 된다



### 그룹 암호 설정 (정보 변경)

```bash
gpasswd
```

* 그룹 암호는 `/etc/gshadow` 에 지정돼있으나 암호 지정을 거의 하지 않는다

  ```bash
  # 실제로 확인해보기
  vi /etc/gshadow
  # hyun:!::
  ```

  

* 옵션

  * `-a 계정명` 계정을 그룹에 추가

    ```bash
    # 사용자 계정을 그룹에 추가한다
    gpasswd -a [사용자 계정명] [그룹명]
    ```

    * 등록됐을 시, `/etc/passwd` 의 계정 정보의 GID 가 변경돼있다

    * 확인하려면 정보를 출력하거나 그룹 내에서 `grep` 으로 계정을 찾는다

      ```bash
      # 정보 출력
      tail -3 /etc/passwd
      # grep 으로 계정 찾기
      grep [계정명] /etc/group
      ```

  * `-d 계정명` 계정을 그룹에서 삭제

  * `-r` 그룹 암호를 삭제



**소속 그룹 정보 출력**

```bash
# 현재 사용자의 실제 ID 와 유효 사용자 ID, 그룹 ID 출력
id 계정이름
```

**소속 그룹 변경**

```bash
# 현재 소속 그룹 (현재 들어와있는 계정) 을 작성한 그룹명으로 변경
newgrp 그룹명
```

---

### 소유권 변경

**파일과 디렉터리 소유권과 그룹 소유권 변경 : chown**

```bash
# 적은 계정명에 파일 또는 디렉토리의 소유권을 옮기겠다
chown [계정명] [파일명 또는 디렉터리명]
```

* 사용자 확인

  `ls /home/`

* 소유자에 대한 권한도 관리자 (root) 가 관리하므로 사용자 계정에서는 불가능

* 소유자와 그룹을 한꺼번에 바꿀 수 있다

  ```bash
  chown [계정명:그룹명] [파일명]
  ```

* 소유 그룹만 변경

  ```bash
  chgrp [계정명] [파일명 또는 디렉터리명]
  ```

  * 옵션
    * `-R` 하위 디렉터리를 모두 포함해 그룹 소유권 변경

---

### 리눅스 시스템 종료

**shutdown**

```bash
shutdown [옵션] [시간] [메세지]
```

* 정해진 시간에 접속된 모든 사용자에게 메세지를 보내면서 종료

  ```bash
  # 즉시 종료
  shutdown -h now
  ```